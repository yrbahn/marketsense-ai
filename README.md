# ğŸ“Š MarketSenseAI 2.0 - í•œêµ­ ì¦ì‹œ ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸

> **ë…¼ë¬¸ ê¸°ë°˜ êµ¬í˜„**: [MarketSenseAI 2.0: Enhancing Stock Analysis through LLM Agents](https://arxiv.org/abs/2502.00415)  
> **í•œêµ­ ì¦ì‹œ ì „ìš©**: KOSPI + KOSDAQ 2,625ì¢…ëª©

MarketSenseAIì˜ 5ê°œ LLM ì—ì´ì „íŠ¸(News, Fundamentals, Dynamics, Macro, Signal)ë¥¼ ìœ„í•œ **ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸**ì…ë‹ˆë‹¤. í•œêµ­ ìƒì¥ê¸°ì—…ì˜ raw ë°ì´í„°ë¥¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì²´ê³„ì ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Collection Pipeline                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ News        â”‚  â”‚ Fundamentals     â”‚  â”‚ Dynamics         â”‚  â”‚
â”‚  â”‚ Collector   â”‚  â”‚ Collector        â”‚  â”‚ Collector        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ ë„¤ì´ë²„ì¦ê¶Œ â”‚  â”‚ â€¢ yfinance       â”‚  â”‚ â€¢ yfinance OHLCV â”‚  â”‚
â”‚  â”‚   ëª¨ë°”ì¼API  â”‚  â”‚   (ì¬ë¬´ì œí‘œ)      â”‚  â”‚ â€¢ SMA/RSI/MACD  â”‚  â”‚
â”‚  â”‚             â”‚  â”‚ â€¢ DART (í–¥í›„)    â”‚  â”‚ â€¢ Bollinger/ATR  â”‚  â”‚
â”‚  â”‚             â”‚  â”‚                  â”‚  â”‚ â€¢ Vol/Sharpe/MDD â”‚  â”‚
â”‚  â”‚             â”‚  â”‚                  â”‚  â”‚ â€¢ ì½”ìŠ¤í”¼ ë²¤ì¹˜ë§ˆí¬ â”‚  â”‚
â”‚  â”‚             â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                      â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    SQLAlchemy ORM                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ SQLite / PostgreSQL                                      â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ stocks   â”‚ â”‚ news_    â”‚ â”‚ price_   â”‚ â”‚ macro_       â”‚ â”‚  â”‚
â”‚  â”‚ â”‚          â”‚ â”‚ articles â”‚ â”‚ data     â”‚ â”‚ reports      â”‚ â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚ â”‚financial_â”‚ â”‚ sec_     â”‚ â”‚technical_â”‚ â”‚ macro_       â”‚ â”‚  â”‚
â”‚  â”‚ â”‚statementsâ”‚ â”‚ filings  â”‚ â”‚indicatorsâ”‚ â”‚ indicators   â”‚ â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”‚earnings_ â”‚ â”‚pipeline_ â”‚                                â”‚  â”‚
â”‚  â”‚ â”‚calls     â”‚ â”‚runs      â”‚                                â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚ Macro Collector   â”‚                                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚
â”‚  â”‚ â€¢ í•œêµ­ì€í–‰ RSS    â”‚                                          â”‚
â”‚  â”‚ â€¢ BOK ECOS API   â”‚                                          â”‚
â”‚  â”‚   (ê²½ì œí†µê³„)      â”‚                                          â”‚
â”‚  â”‚                  â”‚                                          â”‚
â”‚  â”‚                  â”‚                                          â”‚
â”‚  â”‚                  â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ë°ì´í„° ì†ŒìŠ¤ ìƒì„¸

### 1. ğŸ“° News Collector â†’ `news_articles`

| ì†ŒìŠ¤ | ë°ì´í„° | API í‚¤ í•„ìš” |
|------|--------|-------------|
| **Finnhub** | ì¢…ëª©ë³„ ë‰´ìŠ¤ (ì œëª©, ìš”ì•½, URL, ë‚ ì§œ) | âœ… `FINNHUB_API_KEY` |
| **NewsAPI** | í‚¤ì›Œë“œ ê¸°ë°˜ ë‰´ìŠ¤ ê²€ìƒ‰ | âœ… `NEWSAPI_KEY` |
| **RSS Feeds** | Yahoo Finance, CNBC, Reuters | âŒ |

### 2. ğŸ¦ Fundamentals Collector â†’ `financial_statements` + `sec_filings` + `earnings_calls`

| ì†ŒìŠ¤ | ë°ì´í„° | API í‚¤ í•„ìš” |
|------|--------|-------------|
| **yfinance** | Income Statement, Balance Sheet, Cash Flow (5ë¶„ê¸°) | âŒ |
| **SEC EDGAR** | 10-K, 10-Q ì „ë¬¸ (Risk Factors, MD&A, Notes) | âŒ |
| **RapidAPI** | Earnings Call íŠ¸ëœìŠ¤í¬ë¦½íŠ¸ (Prepared + Q&A) | âœ… `RAPIDAPI_KEY` |

### 3. ğŸ“Š Dynamics Collector â†’ `price_data` + `technical_indicators`

| ë°ì´í„° | ìƒì„¸ |
|--------|------|
| **OHLCV** | ì¼ë³„ ì‹œê°€/ê³ ê°€/ì €ê°€/ì¢…ê°€/ê±°ë˜ëŸ‰ (1ë…„) |
| **SMA** | 20ì¼, 50ì¼, 200ì¼ ì´ë™í‰ê·  |
| **RSI** | 14ì¼ ìƒëŒ€ê°•ë„ì§€ìˆ˜ |
| **MACD** | MACD Line, Signal, Histogram |
| **Bollinger** | ìƒë‹¨/ì¤‘ê°„/í•˜ë‹¨ ë°´ë“œ |
| **ATR** | 14ì¼ í‰ê· ì§„í­ |
| **Risk** | ì¼ë³„ìˆ˜ìµë¥ , 20ì¼ë³€ë™ì„±, ìƒ¤í”„ë¹„ìœ¨, MDD |

### 4. ğŸŒ Macro Collector â†’ `macro_indicators` + `macro_reports`

| ì†ŒìŠ¤ | ë°ì´í„° | API í‚¤ í•„ìš” |
|------|--------|-------------|
| **FRED** | GDP, CPI, ê¸ˆë¦¬, ì‹¤ì—…ë¥ , 10Y-2YìŠ¤í”„ë ˆë“œ, VIX | âœ… `FRED_API_KEY` |
| **IMF** | GDP ì„±ì¥ë¥ , ì¸í”Œë ˆì´ì…˜, ì‹¤ì—…ë¥  (ê¸€ë¡œë²Œ) | âŒ |
| **Fed RSS** | ì—°ì¤€ ì—°ì„¤ & ì„±ëª…ì„œ | âŒ |
| **ECB RSS** | ECB ì¶œíŒë¬¼ & ì •ì±… ë°œí‘œ | âŒ |
| **ê¸°ê´€ ë¦¬ì„œì¹˜** | BlackRock, JPMorgan ì¸ì‚¬ì´íŠ¸ | âŒ |

## ğŸš€ ì„¤ì¹˜ ë° ì„¤ì •

### 1. í´ë¡  ë° ì˜ì¡´ì„±

```bash
git clone https://github.com/yrbahn/marketsense-ai.git
cd marketsense-ai
pip install -r requirements.txt
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```bash
cp .env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ API í‚¤ ì…ë ¥
```

**ìµœì†Œ ì„¤ì •** (ë¬´ë£Œ APIë§Œ):
```env
FRED_API_KEY=your-fred-key    # https://fred.stlouisfed.org/docs/api/api_key.html
FINNHUB_API_KEY=your-key      # https://finnhub.io/ (ë¬´ë£Œ í‹°ì–´ ê°€ëŠ¥)
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# DB í…Œì´ë¸” ìƒì„±
python -m src.pipeline --init-db

# S&P 500 ì¢…ëª© ìœ ë‹ˆë²„ìŠ¤ ì´ˆê¸°í™”
python -m src.pipeline --init-universe --index SP500

# ë˜ëŠ” S&P 100ë§Œ
python -m src.pipeline --init-universe --index SP100
```

## ğŸ“Š ì‚¬ìš©ë²•

### ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰

```bash
# ëª¨ë“  ìˆ˜ì§‘ê¸° ìˆœì°¨ ì‹¤í–‰
python -m src.pipeline

# íŠ¹ì • ìˆ˜ì§‘ê¸°ë§Œ
python -m src.pipeline --collector news
python -m src.pipeline --collector fundamentals
python -m src.pipeline --collector dynamics
python -m src.pipeline --collector macro

# íŠ¹ì • ì¢…ëª©ë§Œ
python -m src.pipeline --tickers AAPL MSFT GOOGL NVDA
```

### í…ŒìŠ¤íŠ¸

```bash
pytest tests/ -v
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ERD (ì£¼ìš” í…Œì´ë¸”)

```
stocks (ì¢…ëª© ë§ˆìŠ¤í„°)
â”œâ”€â”€ news_articles          (1:N) ë‰´ìŠ¤ ê¸°ì‚¬
â”œâ”€â”€ financial_statements   (1:N) ì¬ë¬´ì œí‘œ
â”œâ”€â”€ sec_filings           (1:N) SEC ê³µì‹œ
â”œâ”€â”€ earnings_calls        (1:N) ì‹¤ì ë°œí‘œ ì½œ
â”œâ”€â”€ price_data            (1:N) ì¼ë³„ ì£¼ê°€
â””â”€â”€ technical_indicators  (1:N) ê¸°ìˆ ì  ì§€í‘œ

macro_reports              (ë…ë¦½) ë§¤í¬ë¡œ ë³´ê³ ì„œ
macro_indicators           (ë…ë¦½) ë§¤í¬ë¡œ ì§€í‘œ ì‹œê³„ì—´
pipeline_runs              (ë…ë¦½) íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì´ë ¥
```

### ì´ 10ê°œ í…Œì´ë¸”

| í…Œì´ë¸” | í–‰ ìˆ˜ (ì˜ˆìƒ, SP500 1ë…„) | ì„¤ëª… |
|--------|------------------------|------|
| `stocks` | ~500 | ì¢…ëª© ë§ˆìŠ¤í„° |
| `news_articles` | ~50,000 | ê¸ˆìœµ ë‰´ìŠ¤ |
| `financial_statements` | ~7,500 | ì¬ë¬´ì œí‘œ (3ì¢…Ã—5ë¶„ê¸°Ã—500) |
| `sec_filings` | ~5,000 | SEC 10-K/10-Q |
| `earnings_calls` | ~2,000 | ì‹¤ì ë°œí‘œ íŠ¸ëœìŠ¤í¬ë¦½íŠ¸ |
| `price_data` | ~125,000 | ì¼ë³„ OHLCV |
| `technical_indicators` | ~125,000 | ê¸°ìˆ ì  ì§€í‘œ |
| `macro_reports` | ~500 | ë§¤í¬ë¡œ ë³´ê³ ì„œ |
| `macro_indicators` | ~5,000 | FRED/IMF ì‹œê³„ì—´ |
| `pipeline_runs` | ~100 | ì‹¤í–‰ ì´ë ¥ |

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
marketsense-ai/
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml              # ì „ì²´ ì„¤ì • (ì†ŒìŠ¤, ìŠ¤ì¼€ì¤„, DB)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pipeline.py              # ë©”ì¸ íŒŒì´í”„ë¼ì¸ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ collectors/
â”‚   â”‚   â”œâ”€â”€ base_collector.py    # ìˆ˜ì§‘ê¸° ê¸°ë³¸ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ news_collector.py    # ë‰´ìŠ¤ ìˆ˜ì§‘ (Finnhub/NewsAPI/RSS)
â”‚   â”‚   â”œâ”€â”€ fundamentals_collector.py  # ì¬ë¬´/SEC/Earnings Call
â”‚   â”‚   â”œâ”€â”€ dynamics_collector.py      # ì£¼ê°€/ê¸°ìˆ ì§€í‘œ
â”‚   â”‚   â””â”€â”€ macro_collector.py         # FRED/IMF/ì¤‘ì•™ì€í–‰/ê¸°ê´€
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”œâ”€â”€ database.py          # DB ì—°ê²°/ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ models.py            # SQLAlchemy ëª¨ë¸ (10ê°œ í…Œì´ë¸”)
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ helpers.py           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ agents/                  # (í–¥í›„) LLM ì—ì´ì „íŠ¸ êµ¬í˜„
â”œâ”€â”€ scripts/                     # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_pipeline.py
â””â”€â”€ data/                        # (gitignored) DB íŒŒì¼
```

## ğŸ”® í–¥í›„ ê³„íš

- [ ] **LLM ì—ì´ì „íŠ¸ êµ¬í˜„** (News, Fundamentals, Dynamics, Macro, Signal)
- [ ] **RAG íŒŒì´í”„ë¼ì¸** (Macro Agent - ChromaDB ë²¡í„° ìŠ¤í† ì–´)
- [ ] **Chain-of-Agents** (Fundamentals Agent - SEC filing ë¶„ì„)
- [ ] **HyDE ê²€ìƒ‰** (Macro Agent - hypothetical document embeddings)
- [ ] **Signal Agent** (ìµœì¢… íˆ¬ì ì‹ í˜¸ ìƒì„±)
- [ ] **ìŠ¤ì¼€ì¤„ëŸ¬** (ìë™ ì£¼ê¸°ì  ìˆ˜ì§‘)
- [ ] **PostgreSQL** ë°°í¬ ì„¤ì •

## ğŸ“„ ì°¸ê³  ë…¼ë¬¸

```bibtex
@article{fatouros2025marketsenseai,
  title={MarketSenseAI 2.0: Enhancing Stock Analysis through LLM Agents},
  author={Fatouros, George and Metaxas, Kostas},
  journal={arXiv preprint arXiv:2502.00415},
  year={2025}
}
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ì—°êµ¬/êµìœ¡ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
- API í‚¤ë³„ ë¬´ë£Œ í‹°ì–´ ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- SEC EDGARëŠ” ìš”ì²­ ê°„ê²© ì œí•œì´ ìˆìŠµë‹ˆë‹¤ (10 req/sec).
- ì‹¤ì œ íˆ¬ì ê²°ì •ì— ì‚¬ìš©í•˜ì—¬ ë°œìƒí•˜ëŠ” ì†ì‹¤ì— ëŒ€í•´ ì±…ì„ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License
