# MarketSenseAI 2.0 - Data Pipeline Configuration

database:
  url: "sqlite:///data/marketsense.db"
  # PostgreSQL: "postgresql://user:pass@localhost:5432/marketsense"
  echo: false

llm:
  provider: openai
  model: gpt-4o
  temperature: 0.2
  max_tokens: 4096

# ═══════════════════════════════════════════
# 1. News Agent Data Sources
# ═══════════════════════════════════════════
news:
  sources:
    - name: finnhub
      type: api
      api_key_env: FINNHUB_API_KEY
      base_url: "https://finnhub.io/api/v1"
    - name: newsapi
      type: api
      api_key_env: NEWSAPI_KEY
      base_url: "https://newsapi.org/v2"
    - name: rss_feeds
      type: rss
      feeds:
        - "https://feeds.finance.yahoo.com/rss/2.0/headline"
        - "https://www.cnbc.com/id/100003114/device/rss/rss.html"
        - "https://feeds.reuters.com/reuters/businessNews"
  lookback_days: 7
  max_articles_per_stock: 50

# ═══════════════════════════════════════════
# 2. Fundamentals Agent Data Sources
# ═══════════════════════════════════════════
fundamentals:
  sec_filings:
    enabled: true
    filing_types: ["10-K", "10-Q"]
    quarters_lookback: 5
  earnings_calls:
    enabled: true
    provider: rapidapi  # or seekingalpha
    api_key_env: RAPIDAPI_KEY
  financial_statements:
    provider: yfinance
    quarters: 5

# ═══════════════════════════════════════════
# 3. Dynamics Agent Data Sources
# ═══════════════════════════════════════════
dynamics:
  price_source: yfinance
  lookback_days: 365
  indicators:
    - sma_20
    - sma_50
    - sma_200
    - rsi_14
    - macd
    - bollinger_bands
    - atr_14
  peer_comparison: true
  benchmark: "^GSPC"  # S&P 500

# ═══════════════════════════════════════════
# 4. Macroeconomic Agent Data Sources
# ═══════════════════════════════════════════
macro:
  sources:
    - name: fred
      type: api
      api_key_env: FRED_API_KEY
      series:
        - "GDP"
        - "CPIAUCSL"
        - "FEDFUNDS"
        - "UNRATE"
        - "DGS10"
        - "T10Y2Y"
        - "VIXCLS"
    - name: imf
      type: api
      base_url: "https://www.imf.org/external/datamapper/api/v1"
    - name: fed_speeches
      type: rss
      url: "https://www.federalreserve.gov/feeds/speeches.xml"
    - name: ecb_publications
      type: rss
      url: "https://www.ecb.europa.eu/rss/press.html"
    - name: institutional_reports
      type: scraper
      sources:
        - "blackrock"
        - "jpmorgan"
        - "goldman"
  report_cache_dir: "./data/macro_reports"

# ═══════════════════════════════════════════
# Target Stock Universe
# ═══════════════════════════════════════════
universe:
  index: "SP500"  # SP100, SP500, or custom
  # custom_tickers: ["AAPL", "MSFT", "GOOGL"]

# ═══════════════════════════════════════════
# Pipeline Schedule
# ═══════════════════════════════════════════
schedule:
  news: "0 */6 * * *"       # 6시간마다
  fundamentals: "0 2 * * 1"  # 매주 월요일 02:00
  dynamics: "0 18 * * 1-5"   # 장 마감 후
  macro: "0 3 * * 1"         # 매주 월요일 03:00

logging:
  level: INFO
  file: ./logs/pipeline.log
